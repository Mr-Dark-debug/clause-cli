# Configuration Reference

This document describes all configuration options available in Clause CLI.

---

## Configuration Files

Clause uses two configuration levels:

| Level | Location | Purpose |
|-------|----------|---------|
| Global | `~/.clause/config.yaml` | User preferences, defaults |
| Project | `.clause/config.yaml` | Project-specific settings |

---

## Global Configuration

Located at `~/.clause/config.yaml`:

```yaml
# Default settings for new projects
defaults:
  frontend: react
  backend: fastapi
  styling: tailwind
  database: postgresql
  ai_context: comprehensive

# Update settings
updates:
  check_enabled: true
  channel: stable    # stable, beta, nightly

# Template registry
templates:
  registry: https://registry.clause.dev
  cache_dir: ~/.clause/templates

# Output preferences
output:
  color: true
  format: text    # text, json, yaml
  pager: true

# Development
development:
  verbose: false
  debug: false
```

---

## Project Configuration

Located at `.clause/config.yaml` in your project:

### Complete Example

```yaml
# Project Configuration
# Generated by Clause CLI

# Project metadata
metadata:
  name: my-project
  description: An amazing project
  version: 1.0.0
  author: Your Name
  email: you@example.com
  license: MIT
  repository: https://github.com/user/my-project
  keywords:
    - web
    - api
  created_at: 2024-01-15T10:00:00Z
  updated_at: 2024-01-15T10:00:00Z
  clause_version: 1.0.0

# Frontend configuration
frontend:
  enabled: true
  framework: react           # react, vue, svelte, angular, nextjs
  framework_version: "18"
  typescript: true
  styling: tailwind          # tailwind, css-modules, styled-components, scss
  package_manager: npm       # npm, yarn, pnpm, bun
  build_tool: vite           # vite, webpack, esbuild
  test_framework: vitest     # vitest, jest, mocha
  linter: eslint             # eslint, biome
  formatter: prettier        # prettier, biome
  directory: src
  features:
    ssr: false               # Server-side rendering
    ssg: false               # Static site generation
    pwa: false               # Progressive web app
    i18n: false              # Internationalization
    dark_mode: true          # Dark mode support
    storybook: false         # Storybook integration

# Backend configuration
backend:
  enabled: true
  language: python           # python, node, typescript, go
  language_version: "3.11"
  framework: fastapi         # fastapi, flask, django, express, nestjs, gin
  framework_version: "0.100"
  directory: backend
  database:
    primary: postgresql      # postgresql, mysql, mongodb, sqlite
    orm: sqlalchemy          # sqlalchemy, prisma, typeorm, gorm
    migrations: true
    redis: false
  auth:
    provider: jwt            # jwt, clerk, auth0, cognito
    methods:
      - email
      - password
    session_duration: 24     # hours
  api:
    style: rest              # rest, graphql, grpc
    versioning: url          # url, header, none
    documentation: true
    rate_limiting: true
  features:
    websocket: false
    background_jobs: false
    file_upload: true
    email: true
    rate_limiting: true
    logging: true
    metrics: false

# Infrastructure configuration
infrastructure:
  docker: true
  docker_compose: true
  kubernetes: false
  ci: github-actions         # github-actions, gitlab-ci, circleci, jenkins
  hosting: vercel            # vercel, netlify, aws, gcp, azure, heroku
  cdn: true
  monitoring:
    enabled: true
    provider: datadog        # datadog, newrelic, prometheus
    error_tracking: true
    error_tracking_provider: sentry
    logging:
      level: info            # debug, info, warn, error
      format: json           # json, text
      provider: datadog

# Governance configuration
governance:
  enabled: true
  context_level: comprehensive   # minimal, standard, comprehensive
  component_registry: true
  brainstorm_md: true
  prompt_guidelines: true
  rules:
    enabled: true
    strict_mode: false
  documentation:
    readme: true
    contributing: true
    changelog: true
    api: true
    inline: true
    format: markdown

# Development configuration
development:
  git: true
  hooks:
    pre_commit: true
    commit_msg: true
    pre_push: false
    lint_staged: true
  editor:
    config: true
    vscode: true
    jetbrains: false

# Version information
version: "1.0"
schema_version: "2024-01-01"
```

---

## Configuration Reference

### Metadata

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | Yes | Project name (alphanumeric, dashes, underscores) |
| `description` | string | No | Brief project description |
| `version` | string | No | Project version (semver) |
| `author` | string | No | Author name |
| `email` | string | No | Author email |
| `license` | string | No | License type (MIT, Apache-2.0, etc.) |
| `repository` | string | No | Git repository URL |
| `keywords` | []string | No | Project keywords |

### Frontend

| Field | Type | Default | Options |
|-------|------|---------|---------|
| `enabled` | bool | true | Enable frontend |
| `framework` | string | "react" | react, vue, svelte, angular, nextjs |
| `typescript` | bool | true | Use TypeScript |
| `styling` | string | "tailwind" | tailwind, css-modules, styled-components, scss |
| `package_manager` | string | "npm" | npm, yarn, pnpm, bun |
| `build_tool` | string | "vite" | vite, webpack, esbuild |
| `test_framework` | string | "vitest" | vitest, jest, mocha |
| `linter` | string | "eslint" | eslint, biome |
| `formatter` | string | "prettier" | prettier, biome |

#### Frontend Features

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `ssr` | bool | false | Server-side rendering |
| `ssg` | bool | false | Static site generation |
| `pwa` | bool | false | Progressive web app |
| `i18n` | bool | false | Internationalization |
| `dark_mode` | bool | true | Dark mode support |
| `storybook` | bool | false | Storybook integration |

### Backend

| Field | Type | Default | Options |
|-------|------|---------|---------|
| `enabled` | bool | true | Enable backend |
| `language` | string | "python" | python, node, typescript, go |
| `framework` | string | "fastapi" | fastapi, flask, django, express, nestjs, gin |
| `directory` | string | "backend" | Backend directory name |

#### Database

| Field | Type | Default | Options |
|-------|------|---------|---------|
| `primary` | string | "postgresql" | postgresql, mysql, mongodb, sqlite |
| `orm` | string | "sqlalchemy" | sqlalchemy, prisma, typeorm, gorm |
| `migrations` | bool | true | Enable migrations |
| `redis` | bool | false | Enable Redis |

#### Auth

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `provider` | string | "jwt" | jwt, clerk, auth0, cognito |
| `methods` | []string | ["email", "password"] | Auth methods |
| `session_duration` | int | 24 | Session duration in hours |

#### API

| Field | Type | Default | Options |
|-------|------|---------|---------|
| `style` | string | "rest" | rest, graphql, grpc |
| `versioning` | string | "url" | url, header, none |
| `documentation` | bool | true | Generate API docs |

### Infrastructure

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `docker` | bool | true | Generate Dockerfile |
| `docker_compose` | bool | true | Generate docker-compose.yml |
| `kubernetes` | bool | false | Generate K8s manifests |
| `ci` | string | "github-actions" | CI system |
| `hosting` | string | "vercel" | Hosting platform |
| `cdn` | bool | true | Enable CDN |

### Governance

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `enabled` | bool | true | Enable governance |
| `context_level` | string | "comprehensive" | minimal, standard, comprehensive |
| `component_registry` | bool | true | Track components |
| `brainstorm_md` | bool | true | Create Brainstorm.md |
| `prompt_guidelines` | bool | true | Create prompt guidelines |

---

## Environment Variables

Override configuration with environment variables:

| Variable | Description |
|----------|-------------|
| `CLAUSE_CONFIG` | Config file path |
| `CLAUSE_LOG_LEVEL` | Log level (debug, info, warn, error) |
| `CLAUSE_NO_COLOR` | Disable colors (1 or true) |
| `CLAUSE_DEV` | Development mode |
| `CLAUSE_TEMPLATE_REGISTRY` | Template registry URL |

---

## CLI Configuration Commands

### View Configuration

```bash
# List all configuration
clause config list

# Get specific value
clause config get frontend.framework
```

### Set Configuration

```bash
# Set a value
clause config set defaults.frontend vue

# Initialize config
clause config init
```

---

## Validation

Clause validates your configuration against these rules:

1. **Project name**: Must be alphanumeric with dashes/underscores
2. **Versions**: Must follow semver format
3. **Emails**: Must be valid email format
4. **URLs**: Must be valid URL format
5. **Paths**: Must be valid relative paths
6. **Combos**: Some framework/database combos are validated

Run validation:

```bash
clause validate
```

---

## Presets

Presets pre-configure common setups:

### Minimal

```yaml
frontend:
  enabled: true
  framework: react
  typescript: true

backend:
  enabled: true
  framework: fastapi
  database:
    primary: sqlite

governance:
  context_level: minimal
```

### Standard

```yaml
frontend:
  enabled: true
  framework: react
  typescript: true
  styling: tailwind

backend:
  enabled: true
  language: python
  framework: fastapi
  database:
    primary: postgresql

infrastructure:
  docker: true
  ci: github-actions

governance:
  context_level: standard
```

### SaaS

```yaml
frontend:
  enabled: true
  framework: nextjs
  features:
    ssr: true
    dark_mode: true
    i18n: true

backend:
  enabled: true
  database:
    primary: postgresql
    redis: true
  auth:
    provider: clerk
    methods: [email, google, github]
  features:
    websocket: true
    background_jobs: true
    email: true

infrastructure:
  kubernetes: true
  hosting: aws
  monitoring:
    enabled: true

governance:
  context_level: comprehensive
```

---

## Best Practices

1. **Version control**: Commit your `.clause/config.yaml`
2. **Keep updated**: Update `updated_at` when making changes
3. **Validate**: Run `clause validate` after changes
4. **Sync**: Keep global defaults aligned with project needs
